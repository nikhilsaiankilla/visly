# =============================================================================
# APPLICATION CONFIGURATION (.env.example)
# Copy this to .env.local for local development.
# DO NOT commit your actual .env file.
# =============================================================================


# -----------------------------------------------------------------------------
# NEXTAUTH CONFIG
# -----------------------------------------------------------------------------
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET=""

GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""


# -----------------------------------------------------------------------------
# PRIMARY DATABASE (PostgreSQL / Supabase)
# -----------------------------------------------------------------------------
DATABASE_URL="postgres://user:password@host:6543/db_name?pgbouncer=true"
# DIRECT_URL="postgres://user:password@host:5432/db_name"


# -----------------------------------------------------------------------------
# EMAIL (Resend)
# -----------------------------------------------------------------------------
RESEND_API_KEY=""


# =============================================================================
# ANALYTICS INFRASTRUCTURE (COLLECTOR + WORKER)
# =============================================================================

# -----------------------------------------------------------------------------
# KAFKA (LOCAL DEVELOPMENT = Redpanda)
# -----------------------------------------------------------------------------
# Brokers inside Docker network
KAFKA_BROKERS="redpanda:9092"

# Kafka topic names
KAFKA_TOPIC="visly-events"
KAFKA_RETRY_TOPIC="visly-events-retry"
KAFKA_DLQ_TOPIC="visly-events-dlq"

# Local dev does NOT use SASL/SSL
KAFKA_USERNAME=""
KAFKA_PASSWORD=""
KAFKA_CA_CERTIFICATE=""
KAFKA_SSL="false"

# Consumer group
KAFKA_GROUP_ID="visly-worker-group"

# Retry logic for worker
MAX_RETRIES="5"
INITIAL_BACKOFF_MS="1000"
BACKOFF_MULTIPLIER="2"


# -----------------------------------------------------------------------------
# CLICKHOUSE (LOCAL DEVELOPMENT)
# -----------------------------------------------------------------------------
CLICKHOUSE_HOST="http://clickhouse:8123"
CLICKHOUSE_PORT="8123"
CLICKHOUSE_USER="default"
CLICKHOUSE_PASSWORD=""
CLICKHOUSE_DATABASE="visly"

# Batch / performance tuning
CLICKHOUSE_BATCH_SIZE="1000"
CLICKHOUSE_FLUSH_INTERVAL_MS="5000"


# -----------------------------------------------------------------------------
# COLLECTOR SERVICE CONFIG
# -----------------------------------------------------------------------------
COLLECTOR_PORT="3001"


# -----------------------------------------------------------------------------
# WORKER SERVICE CONFIG
# -----------------------------------------------------------------------------
WORKER_PORT="3002"


# -----------------------------------------------------------------------------
# DASHBOARD SERVICE CONFIG
# -----------------------------------------------------------------------------
DASHBOARD_PORT="3000"

# ==============================================================================
# UPSTASH REDIS 
# ==============================================================================
UPSTASH_REDIS_REST_URL=""
UPSTASH_REDIS_REST_TOKEN=""